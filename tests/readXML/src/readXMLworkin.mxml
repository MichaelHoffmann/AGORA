<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   minWidth="955" minHeight="600"
			   creationComplete="xmlService.send()">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<!-- <s:HTTPService id="xmlLoaderService" destination="XMLLoader" /> -->
		<s:HTTPService id="xmlService" 
					   url="http://localhost:8888/loan.xml"
					   resultFormat="e4x"
					   result="xmlLoaded(event)"/>
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.collections.XMLListCollection;
			import mx.controls.Alert;
			import mx.rpc.events.ResultEvent;
			
			private function xmlLoaded(event:ResultEvent):void {
				var results:Object = event.result;
				//var xmlListColl:XMLListCollection = new XMLListCollection(xmlList);
				//trace(results.invoice[0].customer);
				var i:Number = 0;
				for each (var firstName:XML in results.invoice) {
					trace(results.invoice[i].customer.firstname.toString());
					i++;
				}
			}
			
		]]>
	</fx:Script>
</s:Application>
