<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:components="components.*"
		 creationComplete="creationCompleteHandler(event)">
	<fx:Script>
		<![CDATA[
			import Controller.AGORAController;
			import Controller.UpdateController;
			import Controller.UserSessionController;
			
			import Model.AGORAModel;
			
			import classes.Language;
			
			import flash.system.Capabilities;
			
			import mx.controls.Alert;
			import mx.events.FlexEvent;
			
			public var timer:Timer = new Timer(10000);
			public var numClicks:int=0;
			[Bindable] private var buttonWidth:uint = 200;
			[Bindable] private var buttonHeight:uint = 80;
			
			public var catNames:Array= new Array("Class Projects", "Argumentation Theory", "Philosophy", "Theory of Representation", 
				"Environment/Climate", "Projects", "Biology", "Psychiatry", "Law");
			
			protected function creationCompleteHandler(event:FlexEvent):void
			{
				timer.addEventListener(TimerEvent.TIMER, timerFired);
				timer.start();
			}
			
			protected function timerFired(event:TimerEvent):void{
				AGORAController.getInstance().onTimer();
			}
			
			protected function createMapBtn_clickHandler(event:MouseEvent):void
			{
				AGORAController.getInstance().displayMapInfoBox();
			}
			
			
			protected function signInBtn_clickHandler(event:MouseEvent):void
			{
				UserSessionController.getInstance().signInSignOut();
			}
			
			
			protected function registerBtn_clickHandler(event:MouseEvent):void
			{
				UserSessionController.getInstance().showRegistrationBox();
			}
			
			protected function checkLevel(level:int):void
			{
				if(level==0)
				{
					//category.visible=true;
					//mapList.visible=false;
				}
				else if(level==1)
				{
					//category.visible=false;	
					//mainPanel.visible=true;
					//mapList.visible=true;
					
				}
				else if(level==2)
				{
					//category.visible=false;	
					//mainPanel.visible=false;
					//mapList.visible=true;
					
				}
			}
			

		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<mx:TabNavigator y="120" width="800" height="400" tabWidth="267" textAlign="center">
		<s:NavigatorContent width="100%" height="100%" label="{Language.lookup(&quot;Search&quot;)}">
			<mx:Image id="loader1" horizontalCenter="0"
					   verticalCenter="-1"/> 
			<s:HGroup x="10" width="778" height="356" horizontalAlign="center" verticalAlign="middle">
				<mx:Grid id="myGrid" top="-7" bottom="3" horizontalCenter="0" paddingLeft="0"
						 textAlign="center" verticalAlign="middle">
					<mx:GridRow id="row1">
						<mx:GridItem>
							<mx:Button width="100%" height="100%" label="{catNames[0]}"
									   click="{numClicks=1, checkLevel
									   (numClicks)}"/>
						</mx:GridItem>
						<mx:GridItem width="100%" height="100%">
							<mx:Button width="{buttonWidth}" height="{buttonHeight}" label="{catNames[1]}"
									   click="{numClicks=1, checkLevel(numClicks)}"/>
						</mx:GridItem>
						<mx:GridItem width="100%" height="100%">
							<mx:Button label="{catNames[2]}" 
									   click="{numClicks=1, checkLevel(numClicks)}"
									   width="{buttonWidth}" height="{buttonHeight}"
									   />
						</mx:GridItem>
					</mx:GridRow>
					
					<mx:GridRow id="row2">
						<mx:GridItem width="100%" height="100%">
							<mx:Button label="{catNames[3]}" 
									   width="{buttonWidth}" height="{buttonHeight}"
									   click="{numClicks=1, checkLevel(numClicks)}"/>	
						</mx:GridItem>
						<mx:GridItem width="100%" height="100%">
							<mx:Button label="{catNames[4]}" 
									   click="{numClicks=1, checkLevel(numClicks)}"
									   width="{buttonWidth}" height="{buttonHeight}"
									   />
						</mx:GridItem>
						<mx:GridItem width="100%" height="100%">
							<mx:Button label="{catNames[5]}"
									   width="{buttonWidth}" height="{buttonHeight}"
									   click="projects.visible=true"
									   />	
						</mx:GridItem>
					</mx:GridRow>
					<mx:GridRow id="row3">
						<mx:GridItem width="100%" height="100%">
							<mx:Button label="{catNames[6]}" 
									   click="{numClicks=1, checkLevel(numClicks)}"
									   width="{buttonWidth}" height="{buttonHeight}"
									   />
						</mx:GridItem>
						<mx:GridItem>
							<mx:Button label="{catNames[7]}"
									   click="{numClicks=1, checkLevel(numClicks)}"
									   width="100%" height="100%"
									   />
						</mx:GridItem>
						<mx:GridItem>
							<mx:Button label="{catNames[8]}" 
									   click="{numClicks=1, checkLevel(numClicks)}"
									   width="100%" height="100%"
									   />	
						</mx:GridItem>
					</mx:GridRow>
				</mx:Grid>
			</s:HGroup>
		</s:NavigatorContent>
		<s:NavigatorContent width="100%" height="100%" label="{Language.lookup(&quot;MyMaps&quot;)}">
			<s:HGroup>
				<components:MyMapsPanel id="myMaps"  
										skinClass="Skins.MyMapsSkin" width="600" height="300">
				</components:MyMapsPanel>
			</s:HGroup>
		</s:NavigatorContent>
		<s:NavigatorContent width="100%" height="100%" label="{Language.lookup('MyPPProjects')}">
			<components:Projects id="myProjects"
								 width="200" height="300">
			</components:Projects>
		</s:NavigatorContent>
	</mx:TabNavigator>		
	
	<s:VGroup id="Agora" x="1" y="0">
		<s:Label id="Greeting" width="197" height="92" text="{Language.lookup('WelcomeShort')} 2.3"
				 verticalAlign="bottom">
		</s:Label>
		<s:HGroup id="mainPanel" 
				  paddingLeft="25" paddingTop="25" paddingRight="25" paddingBottom="25" visible="false">
			<components:MapListPanel 
				id="mapList" 
				title="{Language.lookup(&quot;ListMaps&quot;)}" 
				width="200" height="400"
				>
			</components:MapListPanel>

			
			<components:ProjectListPanel id="projects" 
										 title="{Language.lookup(&quot;ProjectPP&quot;)}" 
										 width="200" height="400">	
			</components:ProjectListPanel>
			
		</s:HGroup>
		<s:HGroup id="bottomButtonRow" paddingLeft="25" paddingTop="25">
			<s:Button id="createMapBtn"
					  label="{Language.lookup(&quot;NewMap&quot;)}" click="createMapBtn_clickHandler(event)">
			</s:Button >
			
			<s:Button id="createProjectBtn" 
					  label="{Language.lookup(&quot;NewProject&quot;)}" click="Alert.show(Language.lookup(&quot;NotYet&quot;));">
			</s:Button>
			
			<s:Button id="signInBtn"
					  label="{AGORAModel.getInstance().userSessionModel.uid? 
					  Language.lookup('SignOut'): Language.lookup('SignIn')}"
					  click="signInBtn_clickHandler(event)" />
			
			<s:Button id="registerBtn"
					  label="{Language.lookup(&quot;RegisterAsNew&quot;)}"
					  enabled ="{AGORAModel.getInstance().userSessionModel.uid? false: true}"
					  click="registerBtn_clickHandler(event)" />
		</s:HGroup>
	</s:VGroup>	
</s:Group>
